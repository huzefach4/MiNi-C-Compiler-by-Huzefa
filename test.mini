// ============================================================
// COMPLETE MINI-C COMPILER TEST
// This file tests ALL compiler features in one program
// ============================================================

// ------------------------------------------------------------
// FUNCTION DECLARATIONS
// ------------------------------------------------------------

// Simple function with parameters
int add(int a, int b) {
    return a + b;
}

// Function with local variables
int subtract(int a, int b) {
    int result = a - b;
    return result;
}

// Function with if-else
int max(int a, int b) {
    if (a > b) {
        return a;
    } else {
        return b;
    }
}

// Function with multiple conditions
int min(int a, int b) {
    if (a < b) {
        return a;
    }
    return b;
}

// Function with loop
int factorial(int n) {
    int result = 1;
    int i = 1;
    while (i <= n) {
        result *= i;
        i += 1;
    }
    return result;
}

// Function with for loop
int sum_to_n(int n) {
    int sum = 0;
    for (int i = 1; i <= n; i += 1) {
        sum += i;
    }
    return sum;
}

// Recursive function
int fib(int n) {
    if (n <= 1) {
        return n;
    }
    return fib(n - 1) + fib(n - 2);
}

// Function with break
int find_first_divisible(int limit, int divisor) {
    int result = 0;
    for (int i = 1; i <= limit; i += 1) {
        if (i % divisor == 0) {
            result = i;
            break;
        }
    }
    return result;
}

// Function with continue
int sum_skip_fives(int n) {
    int sum = 0;
    for (int i = 1; i <= n; i += 1) {
        if (i % 5 == 0) {
            continue;
        }
        sum += i;
    }
    return sum;
}

// ------------------------------------------------------------
// MAIN FUNCTION - TESTS EVERYTHING
// ------------------------------------------------------------
int main() {
    // ========================================================
    // TEST 1: Variable Declarations
    // ========================================================
    printf("=== TEST 1: Variables ===\n");
    
    int a = 10;
    int b = 20;
    float pi = 3.14;
    int zero = 0;
    
    printf("a = 10, b = 20\n");
    
    // ========================================================
    // TEST 2: Arithmetic Operations
    // ========================================================
    printf("\n=== TEST 2: Arithmetic ===\n");
    
    int sum = a + b;           // 30
    int diff = b - a;          // 10
    int prod = a * b;          // 200
    int quot = b / a;          // 2
    int mod = b % a;           // 0
    
    printf("10 + 20 = 30\n");
    printf("20 - 10 = 10\n");
    printf("10 * 20 = 200\n");
    printf("20 / 10 = 2\n");
    printf("20 %% 10 = 0\n");
    
    // ========================================================
    // TEST 3: Compound Assignment
    // ========================================================
    printf("\n=== TEST 3: Compound Assignment ===\n");
    
    int x = 10;
    x += 5;    // x = 15
    printf("10 += 5 = 15\n");
    
    x -= 3;    // x = 12
    printf("15 -= 3 = 12\n");
    
    x *= 2;    // x = 24
    printf("12 *= 2 = 24\n");
    
    x /= 4;    // x = 6
    printf("24 /= 4 = 6\n");
    
    // ========================================================
    // TEST 4: Comparison Operators
    // ========================================================
    printf("\n=== TEST 4: Comparisons ===\n");
    
    int test_result = 0;
    
    if (5 < 10) {
        printf("5 < 10: TRUE\n");
        test_result += 1;
    }
    
    if (10 > 5) {
        printf("10 > 5: TRUE\n");
        test_result += 1;
    }
    
    if (5 <= 5) {
        printf("5 <= 5: TRUE\n");
        test_result += 1;
    }
    
    if (10 >= 10) {
        printf("10 >= 10: TRUE\n");
        test_result += 1;
    }
    
    if (5 == 5) {
        printf("5 == 5: TRUE\n");
        test_result += 1;
    }
    
    if (5 != 10) {
        printf("5 != 10: TRUE\n");
        test_result += 1;
    }
    
    // ========================================================
    // TEST 5: Logical Operators
    // ========================================================
    printf("\n=== TEST 5: Logical Operators ===\n");
    
    if (5 > 3 && 10 > 5) {
        printf("AND: (5>3 && 10>5) = TRUE\n");
    }
    
    if (5 < 3 || 10 > 5) {
        printf("OR: (5<3 || 10>5) = TRUE\n");
    }
    
    if (!zero) {
        printf("NOT: !0 = TRUE\n");
    }
    
    // ========================================================
    // TEST 6: If-Else Statements
    // ========================================================
    printf("\n=== TEST 6: If-Else ===\n");
    
    int score = 85;
    
    if (score >= 90) {
        printf("Grade: A\n");
    } else {
        if (score >= 80) {
            printf("Grade: B (score=85)\n");
        } else {
            if (score >= 70) {
                printf("Grade: C\n");
            } else {
                printf("Grade: F\n");
            }
        }
    }
    
    // ========================================================
    // TEST 7: While Loop
    // ========================================================
    printf("\n=== TEST 7: While Loop ===\n");
    
    int while_sum = 0;
    int i = 1;
    while (i <= 5) {
        while_sum += i;
        i += 1;
    }
    printf("Sum 1-5 (while): 15\n");
    
    // ========================================================
    // TEST 8: For Loop
    // ========================================================
    printf("\n=== TEST 8: For Loop ===\n");
    
    int for_sum = 0;
    for (int j = 1; j <= 10; j += 1) {
        for_sum += j;
    }
    printf("Sum 1-10 (for): 55\n");
    
    // ========================================================
    // TEST 9: Nested Loops
    // ========================================================
    printf("\n=== TEST 9: Nested Loops ===\n");
    
    int count = 0;
    for (int row = 0; row < 3; row += 1) {
        for (int col = 0; col < 4; col += 1) {
            count += 1;
        }
    }
    printf("3x4 grid count: 12\n");
    
    // ========================================================
    // TEST 10: Break Statement
    // ========================================================
    printf("\n=== TEST 10: Break ===\n");
    
    int break_sum = 0;
    for (int k = 1; k <= 100; k += 1) {
        if (k > 5) {
            break;
        }
        break_sum += k;
    }
    printf("Sum with break at 5: 15\n");
    
    // ========================================================
    // TEST 11: Continue Statement
    // ========================================================
    printf("\n=== TEST 11: Continue ===\n");
    
    int cont_sum = 0;
    for (int m = 1; m <= 10; m += 1) {
        if (m == 5) {
            continue;
        }
        cont_sum += m;
    }
    printf("Sum 1-10 skip 5: 50\n");
    
    // ========================================================
    // TEST 12: Function Calls
    // ========================================================
    printf("\n=== TEST 12: Functions ===\n");
    
    int add_result = add(15, 25);
    printf("add(15, 25) = 40\n");
    
    int sub_result = subtract(100, 37);
    printf("subtract(100, 37) = 63\n");
    
    int max_result = max(42, 17);
    printf("max(42, 17) = 42\n");
    
    int min_result = min(42, 17);
    printf("min(42, 17) = 17\n");
    
    // ========================================================
    // TEST 13: Loops in Functions
    // ========================================================
    printf("\n=== TEST 13: Loops in Functions ===\n");
    
    int fact_result = factorial(5);
    printf("factorial(5) = 120\n");
    
    int sum_result = sum_to_n(10);
    printf("sum_to_n(10) = 55\n");
    
    // ========================================================
    // TEST 14: Recursion
    // ========================================================
    printf("\n=== TEST 14: Recursion ===\n");
    
    int fib_result = fib(10);
    printf("fib(10) = 55\n");
    
    // ========================================================
    // TEST 15: Break in Function
    // ========================================================
    printf("\n=== TEST 15: Break in Function ===\n");
    
    int first_div = find_first_divisible(20, 7);
    printf("First divisible by 7 (1-20): 7\n");
    
    // ========================================================
    // TEST 16: Continue in Function
    // ========================================================
    printf("\n=== TEST 16: Continue in Function ===\n");
    
    int skip_result = sum_skip_fives(20);
    printf("Sum 1-20 skip multiples of 5: 170\n");
    
    // ========================================================
    // TEST 17: Operator Precedence
    // ========================================================
    printf("\n=== TEST 17: Precedence ===\n");
    
    int prec1 = 2 + 3 * 4;        // 14, not 20
    printf("2 + 3 * 4 = 14\n");
    
    int prec2 = (2 + 3) * 4;      // 20
    printf("(2 + 3) * 4 = 20\n");
    
    int prec3 = 20 - 4 * 3 + 2;   // 20 - 12 + 2 = 10
    printf("20 - 4 * 3 + 2 = 10\n");
    
    // ========================================================
    // TEST 18: Complex Expressions
    // ========================================================
    printf("\n=== TEST 18: Complex Expressions ===\n");
    
    int p = 5;
    int q = 3;
    int r = 2;
    
    int complex1 = (p + q) * r - p / 1;  // (5+3)*2 - 5 = 16-5 = 11
    printf("(5+3)*2 - 5/1 = 11\n");
    
    int complex2 = p * q + r * p - q;    // 15 + 10 - 3 = 22
    printf("5*3 + 2*5 - 3 = 22\n");
    
    // ========================================================
    // TEST 19: Multiple Conditions
    // ========================================================
    printf("\n=== TEST 19: Multiple Conditions ===\n");
    
    int age = 25;
    int has_license = 1;
    
    if (age >= 18 && has_license) {
        printf("Can drive: YES\n");
    }
    
    int is_weekend = 0;
    int is_holiday = 1;
    
    if (is_weekend || is_holiday) {
        printf("Day off: YES\n");
    }
    
    // ========================================================
    // TEST 20: Nested If in Loop
    // ========================================================
    printf("\n=== TEST 20: Nested If in Loop ===\n");
    
    int even_sum = 0;
    int odd_sum = 0;
    
    for (int n = 1; n <= 10; n += 1) {
        if (n % 2 == 0) {
            even_sum += n;
        } else {
            odd_sum += n;
        }
    }
    printf("Even sum (2+4+6+8+10): 30\n");
    printf("Odd sum (1+3+5+7+9): 25\n");
    
    // ========================================================
    // FINAL SUMMARY
    // ========================================================
    printf("\n========================================\n");
    printf("ALL TESTS COMPLETED SUCCESSFULLY!\n");
    printf("========================================\n");
    
    // Return a specific value to verify program ran correctly
    // This is the sum of several results as a checksum
    int checksum = add_result + sub_result + max_result + min_result;
    // 40 + 63 + 42 + 17 = 162
    
    return checksum;
}